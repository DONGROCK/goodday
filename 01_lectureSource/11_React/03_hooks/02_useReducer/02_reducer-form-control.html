<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>reducer-form-ctrl</title>

    <script crossorigin src='https://unpkg.com/react@18/umd/react.development.js'></script>
    <script crossorigin src='https://unpkg.com/react-dom@18/umd/react-dom.development.js'></script>
    <script src='https://unpkg.com/@babel/standalone/babel.min.js'></script>

</head>

<body>
    <div id='root'></div>

    <script type='text/babel'>
        const {useReducer} = React;

        function reducer(state, action) {
            return {
                ...state,
                [action.name]: action.value
            }

        }

        function RegistForm(){
                        //
                        //원래 set의 자리
            const [state, dispatch] = useReducer(reducer, {
                name: '',
                nickname: '',
            })

            const {name, nickname} = state;
            //                                  reducer 로
            const onChangeHandler = (e) => dispatch(e.target)

            return(
                <>
                    <label>이름 : </label>
                    <input type="text" name='name' onChange={onChangeHandler}/>
                    <br/>
                    <label>닉네임 : </label>
                    <input type="text" name='nickname' onChange={onChangeHandler}/>
                    <br/>

                    <div>
                        <h3>입력한 이름 : {name}</h3>
                        <h3>입력한 닉네임 : {nickname}</h3>
                        </div>
                </>
            )
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<RegistForm />);
    </script>
</body>

</html>

<!-- 
    1. 컴포넌트 초기화 및 상태 설정
useReducer 훅을 사용하여 reducer 함수와 초기 상태를 설정합니다. 초기 상태에는 name과 nickname이 빈 문자열로 설정됩니다.
초기 상태: { name: '', nickname: '' }
2. reducer 함수 정의
reducer 함수는 현재 상태(state)와 액션(action)을 인자로 받습니다.
이 함수는 새로운 상태 객체를 반환하는데, 이 객체는 현재 상태를 펼친 후(...state), 액션 객체의 name 속성을 키로 하고 value 속성을 값으로 하는 새로운 속성을 추가합니다.
3. 입력 필드 렌더링 및 이벤트 핸들러 설정
두 개의 <input> 필드가 렌더링됩니다. 하나는 이름(name)을 위한 것이고, 다른 하나는 닉네임(nickname)을 위한 것입니다.
각 입력 필드에는 onChange 이벤트 핸들러로 onChangeHandler 함수가 설정됩니다.
4. onChangeHandler 함수 동작
사용자가 입력 필드 중 하나에 입력할 때마다 onChangeHandler 함수가 호출됩니다.
이 함수는 dispatch 함수를 사용하여 reducer 함수를 호출합니다. 이벤트 객체(e.target)가 dispatch 함수에 전달됩니다.
5. 상태 업데이트
reducer 함수는 dispatch로부터 받은 액션 객체를 처리합니다. 액션 객체는 입력 필드의 name 속성을 키로 하고 입력된 value를 값으로 사용하여 새로운 상태를 생성합니다.
이로 인해 상태가 업데이트되고, 컴포넌트는 업데이트된 상태를 반영하여 리렌더링됩니다.
6. 상태 표시
리렌더링된 컴포넌트는 업데이트된 name과 nickname 상태를 화면에 표시합니다.
7. 최종 렌더링 결과
사용자는 입력한 '이름'과 '닉네임'을 화면에서 확인할 수 있습니다.
이 코드는 useReducer를 사용하여 폼 입력 상태를 관리하는 효과적인 예제입니다. 사용자의 입력에 반응하여 상태를 업데이트하고, 이를 화면에 반영하여 동적인 사용자 경험을 제공합니다.
 -->